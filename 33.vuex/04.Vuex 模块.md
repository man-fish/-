# Vuex 模块

#### 实例

```js
modules: {
    account: {
      namespaced: true,
      // 模块内容（module assets）
      state: { ... }, // 模块内的状态已经是嵌套的了，使用 `namespaced` 属性不会对其产生影响
      getters: {
        isAdmin () { ... } // -> getters['account/isAdmin']
      },
      actions: {
        login () { ... } // -> dispatch('account/login')
      },
      mutations: {
        login () { ... } // -> commit('account/login')
      },

      // 嵌套模块
      modules: {
        // 继承父模块的命名空间
        myPage: {
          state: { ... },
          getters: {
            profile () { ... } // -> getters['account/profile']
          }
        },

        // 进一步嵌套命名空间
        posts: {
          namespaced: true,

          state: { ... },
          getters: {
            popular () { ... } // -> getters['account/posts/popular']
          }
        }
      }
    }
  }
```

#### 模块中的namespaced

为每一个模块注册单独命名空间，这样模块之间就分离了，不会和全局的state属性冲突。

#### 模块中的state

基础使用

```js
new Vuex.Store({
        state:{
            name:'global'
        },
        modules:{
            login:{
                namespaced:true,
                state:{
                    name:"login"
                }
            }
        }
    })
}
```

调用

```js
console.log(this.$store.state.login.text)
```

#### 模块中的mutation

基础使用

```js
modules:{
	account:{
		namespaced:true,
		mutations:{
			 isAdmin(state,username){
                 console.log(state.name+username)
            } //commit['account/isAdmin']
		}
	}
}
```

调用

```js
let i = 0
this.$store.commit("account/isAdmin",i++)
```

参数

```js
modules:{
	account:{
		namespaced:true,
        state:{
             num:1
        }
		mutations:{
			isAdmin(state,num){console.log(num+state.num)}
		}
	}
}
```

> 第一参数是模块的局部状态对象

启用了命名空间的 getter 和 action 会收到局部化的 `getter`，`dispatch` 和 `commit`

#### 模块中的actions

```js
const moduleA = {
  // ...
  actions: {
      incremment({state,commit,getters,rootState,rootGetters}，data){
          commit('isAdmin',data)
          console.log(getters.name)
          console.log(state.name)
          console.log(rootState.firstname)
      }
  }
}
```

###### Parmas参数

> 1.Object：全局和模块中的commit，state，getters对象
>
> 2.Object Or All：要传入的数据。

```js
this.$store.dispatch("login/incremment")
```

#### 模块中的getter

```js
getters:{
    name(){
        return 1
    },
    isGetter(state,getters,rootState,rootGetters){
        console.log(state.name)
        console.log(rootState.firstname)
        console.log(getters.name)
        return state.name+rootState.firstname+getters.name
    }
}
```

第一个参数是局部的state，第二参数是局部的getters对象，第三个参数是全局的state，第四个是全局的getter

```js
console.log(this.$store.getters['login/isGetter'])
```

因为getter函数是没有提供可传入数据的参数的。