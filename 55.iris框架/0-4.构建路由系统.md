## 方案一

这里的目录结构结构是我参考其他接口服务器解构来搭建。

![image-20200116203936024](F:\我的笔记\55.iris框架\assets\image-20200116203936024.png)

#### app入口文件

```go
package main

import (
	"github.com/kataras/iris"
	"learn_Iris/route/routes/v1/user"
)

func main() {
	app := iris.New()

	app.PartyFunc("/user", user.UserHandlerParty)
	//创建一个路由组。
	_ = app.Run(
		iris.Addr(":8080"),
		iris.WithPathEscape,
		iris.WithOptimizations,
		iris.WithCharset("utf-8"),
		iris.WithoutServerError(iris.ErrServerClosed),
		iris.WithTimeFormat("2006-01-02 15:04:05"),
		)
}
```

#### user模块

```go
package user

import (
	"fmt"
	"github.com/kataras/iris"
)

func UserHandlerParty(user iris.Party) {
	user.Use(userAuthMiddlewareHandler)
    //中间件函数
	user.Get("/profile", userProfileHandler)
    //路由API函数
}

func userAuthMiddlewareHandler(ctx iris.Context) {
	fmt.Printf("校验成功:%v",ctx.Path())
	ctx.Next()
}

func userProfileHandler(ctx iris.Context){
	ctx.HTML("<h1>peter 8d</h1>")
}
```

