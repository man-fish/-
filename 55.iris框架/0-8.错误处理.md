## 错误处理

### 效果

![image-20200117185242322](F:\我的笔记\55.iris框架\assets\image-20200117185242322.png)

### main

```GO
package main

import (
   "github.com/kataras/iris"
   "learn_Iris/errHandle/core"
   "net/http"
)

func main() {
   app := iris.Default()
   core.InitErrorHandler(app)
   /** 在全局初始化错误处理功能 */
   app.Get("/badreq", func(ctx iris.Context) {
      //panic("500")
      http.Error(ctx.ResponseWriter(),
         http.StatusText(http.StatusBadRequest),
         http.StatusBadRequest)
   })

   app.Run(iris.Addr(":8080"))
}
```

### errhandler

```go
package core

import "github.com/kataras/iris"

func Notfound(ctx iris.Context) {
	ctx.WriteString("error/404")
    //实际业务中可以替换成你的业务代码
}

func IntervalServerError(ctx iris.Context) {
	ctx.WriteString("err/500")
}

func Forbidden(ctx iris.Context) {
	ctx.WriteString("err/403")
}

func BadRequest(ctx iris.Context) {
	ctx.WriteString("err/400")
}

func UnAuthorized(ctx iris.Context){
	ctx.WriteString("err/401")
}

func InitErrorHandler(app *iris.Application) {
	app.OnErrorCode(iris.StatusForbidden,Forbidden)
	app.OnErrorCode(iris.StatusNotFound,Notfound)
	app.OnErrorCode(iris.StatusUnauthorized,UnAuthorized)
	app.OnErrorCode(iris.StatusBadRequest,BadRequest)
	app.OnErrorCode(iris.StatusInternalServerError,IntervalServerError)
}
```

