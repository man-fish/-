# Object 

## Object.create

> 用途：创建一个具有指定原型且可选择性地包含指定属性的对象。
>
> 参数：*prototype*       必需。  **要用作原型的对象**。  可以为 **null**。
>
> ​          *descriptors*     可选。  包含一个或多个属性描述符的 JavaScript 对象。

**“数据属性”**是可获取且可设置值的属性。  数据属性描述符包含 **value** 特性，以及 **writable**、**enumerable** 和 **configurable** 特性。  如果未指定最后三个特性，则它们默认为 **false**。  只要检索或设置该值，**“访问器属性”**就会调用用户提供的函数。  访问器属性描述符包含 **set** 特性和/或 **get** 特性。

> 返回值：一个具有指定的内部原型且包含指定的属性（如果有）的新对象。

 

异常：  如果满足下列任一条件，则将引发 **TypeError** 异常：

> - *prototype* 参数不是对象且不为 **null**。
> - *descriptors* 参数中的描述符具有 **value** 或 **writable** 特性，并具有 **get** 或 **set** 特性。
> - *descriptors* 参数中的描述符具有不为函数的 **get** 或 **set** 特性。

使用对象字面量形式创建对象时，会隐式指定 `Object.prototype` 为新对象的 `[[Prototype]]`。使用 `Object.create()` 方式创建对象时，可以显式指定新对象的 `[[Prototype]]`。该方法接受两个参数：第一个参数为新对象的 `[[Prototype]]`，第二个参数描述了新对象的属性，格式如在 `Object.defineProperties()` 中使用的一样。

```js
// 对象字面量形式，原型被隐式地设置为 Object.prototype
var obj1 = { sex: '男' }

// Object.create() 创建，显示指定为 Object.prototype， 等价于 ↑
    /**
      *以obj对象为原型创造一个对象obj1。
      */
    var obj1 = Object.create(Object.prototype,{
        sex:{
            value:'男',
            writable:true,        	//该属性值是否可以被修改
            configurable:true,      //属性是否可以被删除
            enumerable:true         //是否可以被枚举
        }
    })
    console.dir(obj1)
    console.log(obj1.sex)

    /** 
      * delete
      * 对象和变量一般不能使用delete关键字，因为configurable属性一般是关闭的。
      * 但是这样定义的可以设置其configurable属性。
      */
    delete obj1.sex 
```

#### 接下来就是题外话了------create继承

我们可以用这个方法来实现对象继承：

```js
var rectangle = {
    sizeType: '四边形',
    getSize: function() {
        console.log(this.sizeType)
    }
}

var square = Object.create(rectangle, {
    sizeType: { value: '正方形' }
})

rectangle.getSize()   // "四边形"
square.getSize()      // "正方形"

console.log(rectangle.hasOwnProperty('getSize')) // true
console.log(rectangle.isPrototypeOf(square))     // true
console.log(square.hasOwnProperty('getSize'))    // false
console.log('getSize' in square)                 // true

console.log(square.__proto__ === rectangle)                       // true
console.log(square.__proto__.__proto__ === Object.prototype)      // true
```

![图片描述](https://img.mukewang.com/5d1320a3000168b713550182.png)
对象 `square` 继承自对象 `rectangle`，也就继承了 `rectangle` 的 `sizeType` 属性和 `getSize()`方法，又通过重写 `sizeType` 属性定义了一个自有属性，隐藏并替代了原型对象中的同名属性。所以 `rectangle.getSize()` 输出 「四边形」 而 `square.getSize()` 输出 「正方形」。

在访问一个对象的时候，JavaScript 引擎会执行一个搜索过程，如果在对象实例上发现该属性，该属性值就会被使用，如果没有发现则搜索其原型对象 `[[Prototype]]`，如果仍然没有发现，则继续搜索该原型对象的原型对象 `[[Prototype]]`，直到继承链顶端，顶端通常是一个 `Object.prototype`，其 `[[prototype]]` 为 `null`。这就是**原型链**的查找过程。

可以通过 `Object.create()` 创建 `[[Prototype]]` 为 null 的对象：`var obj = Object.create(null)`。对象 `obj` 是一个没有原型链的对象，这意味着 `toString()` 和 `valueOf` 等存在于 Object 原型上的方法同样不存在于该对象上，通常我们将这样创建出来的对象为**纯净对象**。

## Object.assign

用途：将来自一个或多个源对象中的值复制到一个目标对象。

语法：Object.assign(target, …sources );

参数：  *target，* 必需。可枚举属性复制到的对象。

> - ​            *…sources，*必需。从其中复制可枚举属性的对象。
> - 异常： 如果存在分配错误，此函数将引发 **TypeError**，这将终止复制操作。如果目标属性不可写，则将引发 **TypeError**。
> - 备注：**null** 或 **undefined** 源被视为空对象一样对待，不会对目标对象产生任何影响。

**注意这里的对象复制不改变源对象的原型而且是浅拷贝所以要三思而后用。**

## Object.is（实质上是判断字符串）

`**Object.is()**`方法判断两个值是否是[相同的值](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness)。

语法：`**Object.is()**`方法判断两个值是否是[相同的值](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness)。

`Object.is()` 判断两个值是否[相同](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness)。如果下列任何一项成立，则两个值相同：

> - 两个值都是 [`undefined`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined)
> - 两个值都是 [`null`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/null)
> - 两个值都是 `true` 或者都是 `false`
> - 两个值是由相同个数的字符按照相同的顺序组成的字符串
> - 两个值指向同一个对象
> - 两个值都是数字并且
>   - 都是正零 `+0`
>   - 都是负零 `-0`
>   - 都是 [`NaN`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN)
>   - 都是除零和 [`NaN`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN) 外的其它同一个数字

这种相等性判断逻辑和传统的 [`==`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Equality) 运算符所用的不同，[`==`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Equality) 运算符会对它两边的操作数做隐式类型转换（如果它们类型不同），然后才进行相等性比较，（所以才会有类似 `"" == false` 为 `true` 的现象），但 `Object.is` 不会做这种类型转换。

这与[`===`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Identity)运算符也不一样。[`===`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Identity)运算符（和[`==`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators#Equality)运算符）将数字值`-0`和`+0`视为相等，并认为[`Number.NaN`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/NaN)不等于[`NaN`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/NaN)。

## Object.defineProperty()

**功能:**
方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。如果不指定configurable, writable, enumerable ，则这些属性默认值为false，如果不指定value, get, set，则这些属性默认值为undefined

```js
语法: Object.defineProperty(obj, prop, descriptor)
```

**obj:** 需要被操作的目标对象
**prop:** 目标对象需要定义或修改的属性的名称
**descriptor:** 将被定义或修改的属性的描述符

```js
var obj = new Object();

Object.defineProperty(obj, 'name', {
    configurable: false,
    writable: true,
    enumerable: true,
    value: '张三'
})

console.log(obj.name)  //张三
```

## Object.defineProperties()

**功能:**
方法直接在一个对象上定义一个或多个新的属性或修改现有属性，并返回该对象。

```
语法: Object.defineProperties(obj, props)
```

**obj:** 将要被添加属性或修改属性的对象
**props:** 该对象的一个或多个键值对定义了将要为对象添加或修改的属性的具体配置

```js
var obj = new Object();
Object.defineProperties(obj, {
    name: {
        value: '张三',
        configurable: false,
        writable: true,
        enumerable: true
    },
    age: {
        value: 18,
        configurable: true
    }
})

console.log(obj.name, obj.age) // 张三, 18
```

## Object.getOwnPropertyDescriptor()

**功能:**
该方法返回指定对象上一个自有属性对应的属性描述符。（自有属性指的是直接赋予该对象的属性，不需要从原型链上进行查找的属性）

```
语法: Object.getOwnPropertyDescriptor(obj, prop)
```

**obj:** 需要查找的目标对象
**prop:** 目标对象内属性名称

```js
var person = {
    name: '张三',
    age: 18
}

var desc = Object.getOwnPropertyDescriptor(person, 'name'); 
console.log(desc)  结果如下
// {
//     configurable: true,
//     enumerable: true,
//     writable: true,
//     value: "张三"
// }
```

## Object. getOwnPropertyDescriptors()

**功能:**
所指定对象的所有自身属性的描述符，如果没有任何自身属性，则返回空对象。

```
语法: Object.getOwnPropertyDescriptors(obj)
```

**obj:** 需要查找的目标对象

```js
var person = {
    name: '张三',
    age: 18
}
var desc = Object.getOwnPropertyDescriptors(person, 'name');
console.log(desc) // 结果如下图
```

