# Promise用法拓展

### 1.Promise.all([Promise  Array]) || race

##### 使用实例：只有两个异步函数全部执行完了才会继续执行。

```js
  onLoad: function (options) {
        wx.showLoading({
          title: '翻作者的小金库中...',
        })
        const c1 = bookreadmodel.getSectionNames(options.book_id)
        const c2 = bookreadmodel.getCertainBook(options.book_id)
        Promise.all([c1,c2]).then(res=>{
            wx.hideLoading()
            this.setData({
              sections: res[0],
              book_detail:res[1]
            }) 
        })
  },
```

##### 与之对应的还有Promise.race( [Promise  Array] )会在最先执行完的回调之后执行

### 1.Promise.resolve(classic)

**该方法的参数可以使对象或者其他非promise实例，其效果等效于 new Promise(resolve => resolve(classic))**

```js
    getClassic(index,nextOrPrevious){
      let key = nextOrPrevious == "next" ? this._setKey(index+1) : this._setKey(index-1)
      let classic = wx.getStorageSync(key)

      if (!classic) {
        classic = this.request({
          url: `/classic/${index}/${nextOrPrevious}`
        })
        classic.then(res => {
          wx.setStorageSync(this._setKey(res.index), res)
        })
      }
      console.log(Promise.resolve(classic))
      return Promise.resolve(classic)
    }
```

> 但是如果Promise的参数是一个promise实例，那就不作操作直接将实例返回

